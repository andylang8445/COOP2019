<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>Free Touch Joystick for Phaser.js</title>
    <style>
        #phaser-joystick {
            margin: 0 auto;
            width: 800px;
        }

    </style>
</head>

<body>
    <!-- Add a canvas -->
    <div id="phaser-joystick"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/2.6.2/phaser.min.js"></script>
    <script src="vjoy.js"></script>
    <script>
        /* To make your code more maintable, add the JS code in JS files */
        (function(Phaser) {
            'use strict';

            var sprite;

            var GameConfig = {
                preload: function preload() {
                    /**
                     * Load the images 
                     */
                    game.load.image('logo', 'assets/ourcodeworld-logo.png');
                    game.load.image('vjoy_base', 'assets/base.png');
                    game.load.image('vjoy_body', 'assets/body.png');
                    game.load.image('vjoy_cap', 'assets/cap.png');
                },

                create: function create() {
                    // Set a gray as background color
                    game.stage.backgroundColor = '#f7f7f7';

                    sprite = game.add.sprite(300, 300, 'logo');

                    game.vjoy = game.plugins.add(Phaser.Plugin.VJoy);
                    game.vjoy.inputEnable(0, 0, 400, 600);
                    game.vjoy.speed = {
                        x: 500,
                        y: 500
                    };
                },

                update: function update() {
                    /**
                     * Important to get the cursors on the update function
                     */
                    var cursors = game.vjoy.cursors;

                    // If to left or right
                    if (cursors.left) {
                        sprite.x--;
                    } else if (cursors.right) {
                        sprite.x++;
                    }

                    // If up or down
                    if (cursors.up) {
                        sprite.y--;
                    } else if (cursors.down) {
                        sprite.y++;
                    }
                }
            };

            // Initialize game
            var game = new Phaser.Game(800, 600, Phaser.AUTO, 'phaser-joystick', GameConfig);
        }.call(this, Phaser));

    </script>
</body>

</html>
